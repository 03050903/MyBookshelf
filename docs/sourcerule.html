<!DOCTYPE HTML>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>书源规则说明</title>
</head>

<body>
  <embed src="sourcerule.md" id=md></embed>
  <div id="content"></div>
  
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script>
	// wait until all the resources are loaded
	window.addEventListener("load", findSVGElements, false);

	// fetches the document for the given embedding_element
	function getSubDocument(embedding_element)
	{
		if (embedding_element.contentDocument) 
		{
			return embedding_element.contentDocument;
		} 
		else 
		{
			var subdoc = null;
			try {
				subdoc = embedding_element.getSVGDocument();
			} catch(e) {}
			return subdoc;
		}
	}

	function findSVGElements()
	{
		var elms = document.querySelectorAll(".emb");
		for (var i = 0; i < elms.length; i++)
		{
			var subdoc = getSubDocument(elms[i])
			if (subdoc)
				var mdText = subdoc.getElementsByTagName('pre')[1].toString();
				console.log(mdText);
				document.getElementById('content').innerHTML = mdText;
		}
	}
  </script>

</body>
</html>
